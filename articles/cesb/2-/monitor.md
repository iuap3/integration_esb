# 2.4 运行监控 

运行监控，主要负责对所有服务器的运行状况进行监控，包括服务监控、服务告警、操作日志及服务器日志。

## 2.4.1 服务监控 

### 2.4.1.1 功能介绍 

服务监控用于监控“管理中心”所有服务系统的服务详细信息。包括提供系统名、服务提供名称、服务名称、总次数、成功次数、失败次数、调用字节数、调用时长及查看详情操作。可配置服务监控时间间隔5分钟（调用时长1天）、10分钟（调用时长1周）、1小时（调用时长30天）。

提供者角度，主要是指ESB服务器端的服务提供端。

消费者角度，指ESB服务器的服务引用端。

### 2.4.1.2 界面说明

单击【运行监控】→【服务监控】，进入服务监控页面。

**提供者角度**

单击〖提供者角度〗页签，根据服务监控时间间隔，显示所有服务提供系统提供的服务列表。其中红框标注的服务，说明该服务达到服务告警条件。

![](/articles/cesb/2-/images/image110.png)


图2.4‑1服务监控—提供者角度

**消费者角度**

单击〖消费者角度〗页签，根据服务监控时间间隔，显示所有服务提供系统提供的服务列表。其中红框标注的监控信息，说明该服务达到服务告警条件。

![](/articles/cesb/2-/images/image111.png)



图2.4‑2服务监控—消费者角度

### 2.4.1.3 操作流程

**提供者角度**

**调用字节数**

选中一个服务，鼠标移至按钮![](/articles/cesb/2-/images/image112.png)处，弹出窗口，显示该服务被服务提供系统调用字节详情。包括调用字节数、调用请求字节数、调用响应字节数、调用字节平均值、调用请求最大值、调用请求最小值、调用响应最大值、调用响应最小值。

![](/articles/cesb/2-/images/image113.png)



图2.4‑3 调用字节详情

**调用时长**

选中一个服务，鼠标移至按钮![](/articles/cesb/2-/images/image112.png)处，弹出窗口，显示该服务被服务提供系统调用时长详情。包括调用字时长、调用字节平均时长、调用成功时长、调用失败时长、调用成功平均时长。

![](/articles/cesb/2-/images/image114.png)



图2.4‑4调用时长详情

**查看详情**

选中一个服务，单击![](/articles/cesb/2-/images/image115.png)，弹出窗口，显示该服务调用详细信息，包括调用失败详情、调用成功详情。

〖调用失败详情〗页签中，单击〖详情〗，弹出窗口显示调用失败原因。

![](/articles/cesb/2-/images/image116.png)



图2.4‑5 查看详情—调用失败详情

〖调用成功详情〗页签中，显示调用详情列表，如下图所示。

![](/articles/cesb/2-/images/image117.png)



图2.4‑6 查看详情—调用成功详情

监控报表

监控报表，是整个ESB服务器端的性能表现状况。

单击〖监控报表〗，显示服务监控报表详细信息，包括调用失败次数、调用字节平均值、调用平均时长。

![](/articles/cesb/2-/images/image118.png)

 
图2.4‑7 监控报表


**消费者角度**

其中，调用时长、查看详情操作同上所述。

## 2.4.2 服务告警

### 2.4.2.1 功能介绍

服务警告为管理中心中的服务提供系统，配置服务告警条件。配置后的告警，满足触发条件，则通过“服务监控”展示出来。

### 2.4.2.2 界面说明

单击【运行监控】→【服务告警】，进入服务告警页面。

![](/articles/cesb/2-/images/image119.png)


图2.4‑8服务告警

### 2.4.2.3 操作流程

**新增**

单击〖新增〗按钮，弹出新增告警窗口，编辑告警的基本信息（*为必输项），包括提供系统名称、服务提供名称、指标名称、告警条件、时间维度，单击〖确定〗，生成一条告警标准。

![](/articles/cesb/2-/images/image120.png)



图2.4‑9新增告警设置

<table>

 <tr>

 <td>时间维度</td>

 <td>统计时长</td>

 </tr>

 <tr>

 <td>5分钟</td>

 <td>1天</td>

 </tr>

 <tr>

 <td>10分钟</td>

 <td>1周</td>

 </tr>

 <tr>

 <td>1小时</td>

 <td>1个月</td>

 </tr>

</table>


**修改**

选择某一告警，单击〖修改〗按钮，可编辑告警信息，单击〖保存〗完成告警修改操作。

![](/articles/cesb/2-/images/image121.png)



图2.4‑10 修改告警

**删除**

选择某一告警，单击〖删除〗按钮，可将选择的告警从告警管理列表中删除。

![](/articles/cesb/2-/images/image122.png)



图2.4‑11 删除告警

## 2.4.3 操作日志

### 2.4.3.1 功能介绍

操作日志，显示在“管理中心”中添加的所有服务器上的日志文件信息。



### 2.4.3.2 界面说明

单击【运行监控】→【操作日志】，进入操作日志页面。

![](/articles/cesb/2-/images/image123.png)



图2.4‑12操作日志

### 2.4.3.3 操作流程

**搜索**

用户可以根据用户名、操作类型、结果查询三种查询条件，搜索日志信息。

操作类型包括九种：发布、反发布、上传、添加、更新、删除、启动、停止、其他。

结果查询包括两种：成功、失败。

**归档**

用户可以根据日期时间归档日志，已归档的时间段日志只能通过数据库查询，不能在“管理中心”中显示。

**查看**

选择某一日志，单击〖查看〗按钮，可查看日志详情信息。 

![](/articles/cesb/2-/images/image124.png)



图2.4‑13 查看日志

**删除**

选择某一日志，单击〖删除〗按钮，可删除日志信息，单击〖确定〗完成日志删除操作。

![](/articles/cesb/2-/images/image125.png)


图2.4‑14删除日志

## 2.4.4 节点日志

### 2.4.4.1 功能介绍

节点日志，显示在“管理中心”中添加的所有节点的操作日志文件信息。

### 2.4.4.2 界面说明

单击【运行监控】→【节点日志】，进入服务器日志页面。

![](/articles/cesb/2-/images/image126.png)



图2.4‑15节点日志

### 2.4.4.3 操作流程

**下载**

用户可以选择日志文件，单击〖下载〗，将日志信息下载到本地，界面如下：

![](/articles/cesb/2-/images/image127.png)



图2.4‑16节点日志-下载


































